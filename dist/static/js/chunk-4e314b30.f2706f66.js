(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e314b30"],{"02f4":function(e,t,a){var i=a("4588"),l=a("be13");e.exports=function(e){return function(t,a){var s,n,o=String(l(t)),r=i(a),c=o.length;return r<0||r>=c?e?"":void 0:(s=o.charCodeAt(r),s<55296||s>56319||r+1===c||(n=o.charCodeAt(r+1))<56320||n>57343?e?o.charAt(r):s:e?o.slice(r,r+2):n-56320+(s-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var i=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?i(e,t).length:1)}},"0cef":function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"j",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"b",(function(){return p}));var i=a("b775");function l(e){return Object(i["a"])({url:"/layout/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function s(e){return Object(i["a"])({url:"/layout/"+e+"/delete/"})}function n(e){return Object(i["a"])({url:"/img/upload/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function o(e,t,a){return void 0!==t&&null!==t||(t=1),void 0!==e&&null!=e||(e=""),void 0!==a&&null!==a&&""!==a||(a=""),Object(i["a"])({url:"/layout/?query="+e+"&page="+t+"&flag="+a,method:"get"})}function r(e){return Object(i["a"])({url:"/layout/"+e+"/release/",method:"get"})}function c(e){return Object(i["a"])({url:"build/compose/",method:"post",data:e})}function u(e){return Object(i["a"])({url:"update/compose/",method:"post",data:e})}function d(){return Object(i["a"])({url:"show/compose/",method:"get"})}function m(e){return Object(i["a"])({url:"/file/upload/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function p(e){return Object(i["a"])({url:"/file/delete/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}},"16d8":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:e.id}})},l=[],s=a("db72"),n=(a("a7be"),a("44f8"),a("a6e0"),a("2c43"),a("bff0"),a("1487"),a("547e")),o=a.n(n),r={minHeight:"500px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,viewer:!0,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},c={name:"MarkdownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return r}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var e=Object.assign({},r,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}},watch:{value:function(e,t){e!==t&&e!==this.editor.getValue()&&this.editor.setValue(e)},language:function(e){this.destroyEditor(),this.initEditor()},height:function(e){this.editor.height(e)},mode:function(e){this.editor.changeMode(e)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var e=this;this.editor=new o.a(Object(s["a"])({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){e.$emit("input",e.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(e){this.editor.setValue(e)},getValue:function(){return this.editor.getValue()},setHtml:function(e){this.editor.setHtml(e)},getHtml:function(){return this.editor.getHtml()}}},u=c,d=a("2877"),m=Object(d["a"])(u,i,l,!1,null,null,null);t["a"]=m.exports},"4dd0":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o}));var i=a("b775");function l(e,t,a){return void 0!==t&&null!==t||(t=1),void 0!==a&&null!=a||(a=""),Object(i["a"])({url:"/container/?flag="+e+"&page="+t+"&image_id="+a,method:"get"})}function s(e){return Object(i["a"])({url:"/container/"+e+"/stop/?flag=list",method:"get"})}function n(e){return Object(i["a"])({url:"/container/"+e+"/start/?flag=list",method:"get"})}function o(e){return Object(i["a"])({url:"/container/"+e+"/delete/?flag=list",method:"delete"})}},"5c83":function(e,t,a){},a481:function(e,t,a){"use strict";var i=a("cb7c"),l=a("4bf8"),s=a("9def"),n=a("4588"),o=a("0390"),r=a("5f1b"),c=Math.max,u=Math.min,d=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};a("214f")("replace",2,(function(e,t,a,g){return[function(i,l){var s=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,s,l):a.call(String(s),i,l)},function(e,t){var l=g(a,e,this,t);if(l.done)return l.value;var d=i(e),m=String(this),p="function"===typeof t;p||(t=String(t));var h=d.global;if(h){var b=d.unicode;d.lastIndex=0}var _=[];while(1){var y=r(d,m);if(null===y)break;if(_.push(y),!h)break;var k=String(y[0]);""===k&&(d.lastIndex=o(m,s(d.lastIndex),b))}for(var w="",x=0,S=0;S<_.length;S++){y=_[S];for(var I=String(y[0]),L=c(u(n(y.index),m.length),0),$=[],C=1;C<y.length;C++)$.push(f(y[C]));var D=y.groups;if(p){var O=[I].concat($,L,m);void 0!==D&&O.push(D);var j=String(t.apply(void 0,O))}else j=v(I,m,L,$,D,t);L>=x&&(w+=m.slice(x,L)+j,x=L+I.length)}return w+m.slice(x)}];function v(e,t,i,s,n,o){var r=i+e.length,c=s.length,u=p;return void 0!==n&&(n=l(n),u=m),a.call(o,u,(function(a,l){var o;switch(l.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(r);case"<":o=n[l.slice(1,-1)];break;default:var u=+l;if(0===u)return a;if(u>c){var m=d(u/10);return 0===m?a:m<=c?void 0===s[m-1]?l.charAt(1):s[m-1]+l.charAt(1):a}o=s[u-1]}return void 0===o?"":o}))}}))},e036:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-dialog",{attrs:{visible:e.centerDialogVisible,title:"添加",width:"65%"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-tabs",{attrs:{value:"add"},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{name:"add",label:"添加"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"label-width":"80px","element-loading-text":"添加中"}},[a("el-form-item",{attrs:{label:"漏洞名称"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.vulInfo.vul_name,callback:function(t){e.$set(e.vulInfo,"vul_name",t)},expression:"vulInfo.vul_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"镜像"}},[a("el-col",{attrs:{span:17}},["file"===e.imgType?a("el-upload",{ref:"upload",attrs:{"http-request":e.uploadImg,accept:".tar",action:"/CombinationImage/",limit:1,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"medium",type:"primary"},slot:"trigger"},[e._v("选取文件")])],1):e._e(),e._v(" "),"text"===e.imgType?a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{size:"medium","fetch-suggestions":e.querySearchAsync},on:{select:e.handleSelect},model:{value:e.vulInfo.name,callback:function(t){e.$set(e.vulInfo,"name",t)},expression:"vulInfo.name"}}):e._e()],1),e._v(" "),a("el-col",{staticStyle:{float:"right",right:"0"},attrs:{span:5}},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){return t.stopPropagation(),e.changeType(t)}},model:{value:e.imgType,callback:function(t){e.imgType=t},expression:"imgType"}},[e._v(e._s(e.imgTypeText))])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择镜像标签"},model:{value:e.vulInfo.degree,callback:function(t){e.$set(e.vulInfo,"degree",t)},expression:"vulInfo.degree"}},e._l(e.degreeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Rank"}},[a("el-input-number",{attrs:{min:.5,max:5,precision:1,step:.5,size:"medium"},model:{value:e.vulInfo.rank,callback:function(t){e.$set(e.vulInfo,"rank",t)},expression:"vulInfo.rank"}}),e._v(" "),a("el-tooltip",{attrs:{content:"默认分数为2.5分，可根据漏洞的利用难度进行评判",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",size:"medium"},model:{value:e.vulInfo.desc,callback:function(t){e.$set(e.vulInfo,"desc",t)},expression:"vulInfo.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"flag"}},[a("el-switch",{model:{value:e.vulInfo.is_flag,callback:function(t){e.$set(e.vulInfo,"is_flag",t)},expression:"vulInfo.is_flag"}}),e._v(" "),a("el-tooltip",{attrs:{content:"是否开启flag",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.uploadImg}},[e._v("提 交")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleMark}},[e._v("编辑writeup")])],1),e._v(" "),!0===e.markstatus?a("el-form-item",[a("div",{staticClass:"container"},[a("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab"},height:"200px"},model:{value:e.vulInfo.writeup_date,callback:function(t){e.$set(e.vulInfo,"writeup_date",t)},expression:"vulInfo.writeup_date"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.closeHandleMark}},[e._v("关闭")])],1):e._e()],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"local",label:"本地导入"}},[a("div",{staticClass:"filter-container"},[a("el-input",{staticStyle:{width:"230px"},attrs:{size:"medium"},model:{value:e.localSearch,callback:function(t){e.localSearch=t},expression:"localSearch"}}),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{size:"medium",type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.batchLocalAdd}},[e._v("\n                一键导入\n              ")]),e._v("   \n              "),a("el-tooltip",{attrs:{content:"一键导入默认导入分数为 2.5 分,漏洞名称为镜像名称,漏洞描述为漏洞名称",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.localLoading,expression:"localLoading"}],staticStyle:{width:"100%"},attrs:{data:e.localImageList.filter((function(t){return!e.localSearch||t.name.toLowerCase().includes(e.localSearch.toLowerCase())})),"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectLocalImages}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"标签",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[!0===i.flag?a("el-tag",{attrs:{effect:"dark",type:"info"}},[e._v("已导入")]):!1===i.flag?a("el-tag",{attrs:{effect:"dark"}},[e._v("未导入")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLocalRemove(i.name)}}},[e._v("移除")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"addcompose",label:"Compose编译"}},[a("compose")],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.progressShow,title:e.progress.title,width:"60%","before-close":e.closeProgress},on:{"update:visible":function(t){e.progressShow=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.progressLoading,expression:"progressLoading"}]},e._l(e.progress.layer,(function(t,i){return a("el-row",{staticStyle:{"margin-bottom":"10px",height:"24px"}},[a("el-tag",{staticStyle:{float:"left",width:"15%",height:"24px","line-height":"24px"},attrs:{align:"center"}},[e._v(e._s(t.id))]),e._v(" "),a("div",{staticStyle:{float:"left",width:"80%","margin-left":"10px"}},[100===t.progress?a("el-progress",{attrs:{percentage:t.progress,"text-inside":!0,"stroke-width":24,status:"success"}}):a("el-progress",{attrs:{percentage:t.progress,"text-inside":!0,"stroke-width":24}})],1)],1)})),1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.deleteShow,title:"删除",width:"80%"},on:{"update:visible":function(t){e.deleteShow=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deleteContainerList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vul_name",width:"150","show-overflow-tooltip":!0,label:"漏洞名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"user_name",width:"100",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"vul_host",width:"200","show-overflow-tooltip":!0,label:"访问地址"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"85"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-tag",[e._v(e._s(i.container_status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"vul_desc","show-overflow-tooltip":!0,width:"300",label:"漏洞描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"combination_desc",label:"操作","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return["running"===i.container_status||"stop"===i.container_status?a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.delContainer(i)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.editShow},on:{"update:visible":function(t){e.editShow=t}}},[a("el-tabs",[a("el-tab-pane",{attrs:{label:"修改"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.editLoding,expression:"editLoding"}],attrs:{"label-width":"80px","element-loading-text":"修改中"}},[a("el-form-item",{attrs:{label:"漏洞名称"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.editVulInfo.image_vul_name,callback:function(t){e.$set(e.editVulInfo,"image_vul_name",t)},expression:"editVulInfo.image_vul_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"镜像"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editVulInfo.image_name,callback:function(t){e.$set(e.editVulInfo,"image_name",t)},expression:"editVulInfo.image_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择镜像标签"},model:{value:e.editVulInfo.degree,callback:function(t){e.$set(e.editVulInfo,"degree",t)},expression:"editVulInfo.degree"}},e._l(e.degreeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Rank"}},[a("el-input-number",{attrs:{min:.5,max:5,precision:1,step:.5,size:"medium"},model:{value:e.editVulInfo.rank,callback:function(t){e.$set(e.editVulInfo,"rank",t)},expression:"editVulInfo.rank"}}),e._v(" "),a("el-tooltip",{attrs:{content:"默认分数为2.5分，可根据漏洞的利用难度进行评判",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"flag"}},[a("el-switch",{model:{value:e.editVulInfo.is_flag,callback:function(t){e.$set(e.editVulInfo,"is_flag",t)},expression:"editVulInfo.is_flag"}}),e._v(" "),a("el-tooltip",{attrs:{content:"是否开启flag",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",size:"medium"},model:{value:e.editVulInfo.image_desc,callback:function(t){e.$set(e.editVulInfo,"image_desc",t)},expression:"editVulInfo.image_desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.handleEditImage}},[e._v("提 交")])],1)],1)],1),e._v(" "),!0===e.editVulInfo.is_docker_compose?a("el-tab-pane",{attrs:{id:"compose-update",label:"Compose修改"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-document"}),e._v("DockerCompose修改")]),e._v(" "),a("el-tabs",{ref:"tab",attrs:{value:"dockerfile"}},[a("el-tab-pane",{attrs:{name:"dockerfile"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit"}),e._v(" DockerCompose.yml")]),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",rows:"10",placeholder:"Define or paste the content of Your DockerCompose.yml here"},model:{value:e.compose_content,callback:function(t){e.compose_content=t},expression:"compose_content"}})],1)],1)],1)])],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"action-group"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.update_compose_build}},[e._v("编译")])],1)]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"0px"},attrs:{span:22}},[a("div",[a("el-upload",{ref:"upload",attrs:{"http-request":e.upload,"max-size":2048,action:"/CombinationImage/","before-upload":e.beforeAvatarUpload,"on-remove":e.removeChange,"on-change":e.handleChange,"file-list":e.fileList}},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1)],1)])],1)],1)],1):e._e()],1)],1),e._v(" "),a("div",{staticClass:"filter-container"},[a("el-input",{staticStyle:{width:"230px"},attrs:{size:"medium"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{size:"medium",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.handleQuery(1)}}},[e._v("\n        查询\n      ")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px","margin-bottom":"10px"},attrs:{size:"medium",type:"primary",icon:"el-icon-edit"},on:{click:e.openCreate}},[e._v("\n        添加\n      ")]),e._v(" "),!1===e.loading?a("el-button",{staticClass:"filter-item",staticStyle:{float:"right","margin-bottom":"10px"},attrs:{size:"medium",type:"primary",icon:"el-icon-refresh-left"},on:{click:e.getWebsiteData}},[e._v("\n        一键同步\n      ")]):!0===e.loading?a("el-button",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{type:"primary",loading:!0}},[e._v("同步中")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"",align:"center"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"image_name",label:"镜像名称","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"image_vul_name",label:"漏洞名称","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"image_port",label:"端口",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rank",label:"分数",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"漏洞分类",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return i.degree.length>0&&""!==i.degree?e._l(i.degree,(function(t){return a("el-tag",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(t))])})):void 0}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{prop:"image_desc","show-overflow-tooltip":!0,label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"update_date","show-overflow-tooltip":!0,label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[!1===i.is_ok&&""!==i.status.task_id?a("el-tag",{staticStyle:{display:"inline-block",float:"left","line-height":"28px",height:"28px","margin-left":"5px"},attrs:{effect:"dark"},on:{click:function(t){return e.openProgress(i,1)}}},[a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("span",[e._v("下载中")])]),e._v(" "),a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("el-progress",{staticStyle:{"margin-left":"3px","margin-top":"3px"},attrs:{type:"circle","stroke-width":3,"show-text":!1,"text-inside":!1,percentage:i.status.progress,width:20}})],1)]):!1===i.is_ok&&""===i.status.task_id?a("el-button",{staticStyle:{display:"inline-block",float:"left","margin-left":"5px"},attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadImg(i)}}},[e._v("下载")]):e._e(),e._v(" "),!0===i.is_ok||!1===i.is_ok&&""===i.status.task_id?a("el-button",{staticStyle:{display:"inline-block",float:"left","margin-left":"5px"},attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(t){return e.openEdit(i)}}},[e._v("修改")]):e._e(),e._v(" "),!0===i.is_ok||!1===i.is_ok&&""===i.status.task_id?a("el-button",{staticStyle:{display:"inline-block",float:"left","margin-left":"5px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(i)}}},[e._v("删除")]):e._e(),e._v(" "),!0===i.is_ok&&!0===i.is_share?a("el-tag",{staticStyle:{display:"inline-block",float:"left","line-height":"28px",height:"28px","margin-left":"5px"},attrs:{type:"success",effect:"dark"}},[a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("span",[e._v("已分享")])])]):e._e(),e._v(" "),!0===i.is_ok&&!1===i.is_share&&"share"!==i.status.progress_status?a("el-button",{staticStyle:{display:"inline-block",float:"left","margin-left":"5px"},attrs:{size:"mini",type:"primary",icon:"el-icon-share"},on:{click:function(t){return e.shareImg(i)}}},[e._v("分享")]):e._e(),e._v(" "),!0===i.is_ok&&"share"===i.status.progress_status?a("el-tag",{staticStyle:{display:"inline-block",float:"left","line-height":"28px",height:"28px","margin-left":"5px"},attrs:{effect:"dark"},on:{click:function(t){return e.openProgress(i,2)}}},[a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("span",[e._v("分享中")])]),e._v(" "),a("div",{staticStyle:{display:"inline-block",float:"left"}},[a("el-progress",{staticStyle:{"margin-left":"3px","margin-top":"3px"},attrs:{type:"circle","stroke-width":3,"show-text":!1,"text-inside":!1,percentage:i.status.progress,width:20}})],1)]):e._e()]}}])})],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"page-size":e.page.size,layout:"total, prev, pager, next, jumper",total:e.page.total},on:{"current-change":e.handleQuery}})],1)],1)},l=[],s=(a("386d"),a("a481"),a("7f7f"),a("ac6a"),a("3007")),n=a("bc3a"),o=a.n(n);function r(e){var t="https://hub.docker.com/api/content/v1/products/search?page_size=50&q=vulfocus%2F"+e+"&type=image";return o()({method:"get",url:t,headers:{"Sec-Fetch-Site":"none","Sec-Fetch-Mode":"cors","Sec-Fetch-Dest":"empty","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-CN,zh;q=0.9","Search-Version":"v3"}})}var c=a("b775");function u(e){return Object(c["a"])({url:"/images/",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}function d(e,t){return Object(c["a"])({url:"/images/"+e+"/edit/",method:"post",data:t})}function m(e){return Object(c["a"])({url:"/images/"+e+"/delete/"})}function p(){return Object(c["a"])({url:"/images/local/local/"})}function f(e){return Object(c["a"])({url:"/images/local/local_add/",method:"post",data:e})}function g(e){return Object(c["a"])({url:"/images/"+e+"/download/"})}function v(e){return Object(c["a"])({url:"/images/"+e+"/share/"})}var h=a("4dd0"),b=a("ea7f"),_=a("16d8"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"widget"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"border-card","element-loading-text":"正在安装相关镜像","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.1)"}},[a("el-tab-pane",{attrs:{id:"ceshi"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-document"}),e._v("DockerCompose")]),e._v(" "),a("el-form",{ref:"build",attrs:{model:e.composeForm,inline:"",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"tag1"}},[a("el-input",{attrs:{placeholder:"eg. redis:latest"},model:{value:e.composeForm.tag1,callback:function(t){e.$set(e.composeForm,"tag1",t)},expression:"composeForm.tag1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择镜像标签"},model:{value:e.composeForm.degree,callback:function(t){e.$set(e.composeForm,"degree",t)},expression:"composeForm.degree"}},e._l(e.degreeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Rank"}},[a("el-input-number",{attrs:{min:0,max:5,precision:1,step:.5,size:"mini"},model:{value:e.composeForm.rank,callback:function(t){e.$set(e.composeForm,"rank",t)},expression:"composeForm.rank"}}),e._v(" "),a("el-tooltip",{attrs:{content:"默认分数为2.5分，可根据漏洞的利用难度进行评判",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"flag"}},[a("el-switch",{model:{value:e.composeForm.is_flag,callback:function(t){e.$set(e.composeForm,"is_flag",t)},expression:"composeForm.is_flag"}}),e._v(" "),a("el-tooltip",{attrs:{content:"是否开启flag",placement:"top"}},[a("i",{staticClass:"el-icon-question"})])],1)],1),e._v(" "),a("el-tabs",{ref:"tab",attrs:{value:"dockerfile"}},[a("el-tab-pane",{attrs:{name:"dockerfile"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-edit"}),e._v(" DockerCompose.yml")]),e._v(" "),a("div",[a("el-form",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",rows:"10",placeholder:"Define or paste the content of Your DockerCompose.yml here"},model:{value:e.compose_content,callback:function(t){e.compose_content=t},expression:"compose_content"}})],1)],1)],1)])],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"action-group"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.compose_build}},[e._v("编译")])],1)]),e._v(" "),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:22}},[a("div",[a("el-upload",{ref:"upload",attrs:{"http-request":e.upload,"max-size":2048,action:"/CombinationImage/","before-upload":e.beforeAvatarUpload,"on-remove":e.removeChange,"on-change":e.handleChange,"file-list":e.fileList}},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1)],1)])],1)],1)],1)],1)],1)])},k=[],w=a("0cef"),x={inject:["reload"],data:function(){return{rules:{tag:[{required:!0,max:100,min:2,message:"请输入要构建的镜像名称"}],tag1:[{required:!0,max:100,min:2,message:"请输入要构建的镜像名称"}]},selectHub:"DockerHub",imageName:"",buildForm:{tag:""},composeForm:{tag1:"",rank:"",degree:[],is_flag:!0},options:[{value:"DockerHub",label:"DockerHub"}],file:null,output:[],pk:null,content:"",compose_content:"",listTotal:0,listData:[],showLog:!1,loading:!1,newFile:new FormData,fileList:[],degreeList:[{value:"命令执行",lable:"命令执行"},{value:"代码执行",lable:"代码执行"},{value:"文件写入",lable:"文件写入"},{value:"文件上传",lable:"文件上传"},{value:"后门",lable:"后门"},{value:"默认口令",lable:"默认口令"},{value:"弱口令",lable:"弱口令"},{value:"权限绕过",lable:"权限绕过"},{value:"未授权访问",lable:"未授权访问"},{value:"XXE漏洞",lable:"XXE漏洞"},{value:"SQL注入",lable:"SQL注入"},{value:"文件读取",lable:"文件读取"},{value:"文件下载",lable:"文件下载"},{value:"文件包含",lable:"文件包含"},{value:"文件删除",lable:"文件删除"},{value:"目录遍历",lable:"目录遍历"},{value:"信息泄漏",lable:"信息泄漏"},{value:"任意账户操作",lable:"任意账户操作"},{value:"XSS漏洞",lable:"XSS漏洞"},{value:"SSRF漏洞",lable:"SSRF漏洞"},{value:"CSRF漏洞",lable:"CSRF漏洞"}]}},created:function(){},methods:{showCompose:function(){var e=this;Object(w["g"])().then((function(t){if(200===t.data.code){var a=t.data["data"],i=t.data["img_name"];e.compose_content=a,e.composeForm.tag1=i,e.loading=!0}}))},removeChange:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=new FormData;i.set("file",e.name),Object(w["b"])(i).then((function(i){var l=i.data;if(200===l.status){for(var s=0;s<t.length;s++)t[s]===e&&t.splice(s,1);a.$message({type:"success",message:"删除成功!"})}else t.push(e),a.$message({type:"error",message:"删除失败!"})}))})).catch((function(){t.push(e),a.$message({type:"info",message:"已取消删除"})}))},compose_build:function(){var e=this,t={};t.compose_content=this.compose_content,t.tag=this.composeForm.tag1,t.rank=this.composeForm.rank,t.degree=this.composeForm.degree,t.is_flag=this.composeForm.is_flag,Object(w["a"])(t).then((function(t){200===t.data.code?(e.$message({title:"构建任务创建成功",message:t.data.message,type:"success"}),e.reload()):e.$message({title:"构建任务创建失败",message:t.data.message,type:"error"})}))},beforeAvatarUpload:function(e){if(!e)return!1;this.newFile.set("file",e)},handleChange:function(e,t){this.fileList=t},upload:function(e,t){var a=this,i=e.file.size/1024/1024;if(i>2)this.$message({message:"文件大小必须小于2M",type:"error"}),this.fileList.pop();else{var l=this.newFile;Object(w["i"])(l).then((function(e){var t=e.data;if(t.data&&200===t.status){for(var i=0;i<a.fileList.length;i++)-1===a.fileList[i].name.indexOf("../compose_file/")&&(a.fileList[i].name="../compose_file/"+a.fileList[i].name);a.$message({message:"上传成功",type:"success"})}else a.fileList.pop(),a.$message({message:t.msg,type:"error"})})).catch((function(e){a.fileList.pop(),a.$message({message:"服务器内部错误",type:"error"})}))}}}},S=x,I=(a("ff32"),a("2877")),L=Object(I["a"])(S,y,k,!1,null,"c453a410",null),$=L.exports,C={inject:["reload"],name:"index",components:{MarkdownEditor:_["a"],Compose:$},data:function(){return{markstatus:!1,tableData:[],search:"",localSearch:"",centerDialogVisible:!1,startCon:!1,vulInfo:{rank:"",name:"",vul_name:"",desc:"",degree:[],writeup_date:"",is_flag:!0},editShow:!1,editLoding:!1,tabLoading:!0,degreeList:[{value:"命令执行",lable:"命令执行"},{value:"代码执行",lable:"代码执行"},{value:"文件写入",lable:"文件写入"},{value:"文件上传",lable:"文件上传"},{value:"后门",lable:"后门"},{value:"默认口令",lable:"默认口令"},{value:"弱口令",lable:"弱口令"},{value:"权限绕过",lable:"权限绕过"},{value:"未授权访问",lable:"未授权访问"},{value:"XXE漏洞",lable:"XXE漏洞"},{value:"SQL注入",lable:"SQL注入"},{value:"文件读取",lable:"文件读取"},{value:"文件下载",lable:"文件下载"},{value:"文件包含",lable:"文件包含"},{value:"文件删除",lable:"文件删除"},{value:"目录遍历",lable:"目录遍历"},{value:"信息泄漏",lable:"信息泄漏"},{value:"任意账户操作",lable:"任意账户操作"},{value:"XSS漏洞",lable:"XSS漏洞"},{value:"SSRF漏洞",lable:"SSRF漏洞"},{value:"CSRF漏洞",lable:"CSRF漏洞"}],editVulInfo:{rank:"",image_name:"",image_id:"",image_vul_name:"",image_desc:"",degree:[],writeup_date:"",is_flag:!0,is_docker_compose:!1,docker_compose_yml:""},compose_content:"",imgType:"text",imgTypeText:"切换为文件",loading:!1,summaries:[],taskCheckInterval:null,tmpImageNameList:[],localImageList:[],tmpLocalImageList:[],localLoading:!0,selectLocalImages:[],progressShow:!1,progressLoading:!1,deleteShow:!1,deleteContainerList:[],progress:{title:"",layer:[],total:0,count:0,progress:0,progressInterval:null},taskList:[],taskDict:{},page:{total:0,size:20},value:[],newFile:new FormData,fileList:[]}},created:function(){this.initTableData(),this.initSummariesList()},methods:{querySearchAsync:function(e,t){var a=this,i=this.summaries;null===e||""===e||0===e.length?(this.initSummariesList(),t(i)):r(e).then((function(e){if(a.summaries=[],200===e.status){var l=e.data["summaries"];null!=l&&l.forEach((function(e,t,i){a.summaries.push({value:e["name"]})})),i=a.summaries,t(i)}}))},handleMark:function(){this.markstatus=!0},closeHandleMark:function(){this.markstatus=!1},getWebsiteData:function(){var e=this;this.loading=!0,Object(s["g"])().then((function(t){var a=t.data;200===a.code?(e.$message({message:"同步完成",type:"success"}),e.reload()):e.$message({message:"同步失败",type:"error"}),e.loading=!1}))},searchSummariesList:function(e){var t=this;this.summaries=[],r(e).then((function(e){if(t.summaries=[],200===e.status){var a=e.data["summaries"];a.forEach((function(e,a,i){t.summaries.push({value:e["name"]})}))}}))},initSummariesList:function(){this.searchSummariesList("")},initTableData:function(){var e=this;clearInterval(this.taskCheckInterval),Object(s["e"])(void 0,!0,1).then((function(t){e.tableData=t.data.results,e.tabLoading=!1,e.page.total=t.data.count,e.tableData.forEach((function(t,a,i){var l=t.image_name;e.tmpImageNameList.indexOf(l)>-1&&e.$notify({title:"成功",message:l+" 添加成功",type:"success"})}));var a=t.data.results;e.taskCheckInterval=window.setInterval((function(){setTimeout((function(){e.checkTask(a)}),0)}),2e3)}))},openCreate:function(){this.centerDialogVisible=!0,this.vulInfo.rank=2.5,this.vulInfo.name="",this.vulInfo.vul_name="",this.vulInfo.desc="",this.vulInfo.degree=[],this.vulInfo.writeup_date=[],this.vulInfo.is_flag=!0},openProgress:function(e,t){var a=this;this.progress={title:"",layer:[],total:0,count:0,progress:0,progressInterval:null},this.progressShow=!0,this.progressLoading=!0;var i=e.status.task_id;this.progress.title=1===t?"下载镜像："+e.image_name:"分享镜像："+e.image_name,this.progress.progressInterval=window.setInterval((function(){setTimeout((function(){a.progressLoading=!1,Object(b["c"])(i).then((function(e){null!=e.data.data&&200===e.data.status&&(a.progress.count=e.data.data.progress_count,a.progress.progress=e.data.data.progress,a.progress.total=e.data.data.total,a.progress.layer=e.data.data.layer,(100===a.progress.progress||0!==a.progress.count&&0!==a.progress.total&&a.progress.count===a.progress.total)&&(clearInterval(a.progress.progressInterval),a.progressShow=!1))}))}),1.5)}),2e3)},openEdit:function(e){this.editShow=!0,this.editVulInfo=e,this.compose_content=e.status.json_yml},handleEditImage:function(){var e=this;this.editLoding=!0,d(this.editVulInfo.image_id,this.editVulInfo).then((function(t){e.editLoding=!1;var a=t.data,i=a.msg;200===a.status?(e.$message({message:"修改成功!",type:"success"}),e.editShow=!1,e.initTableData()):e.$message({message:i,type:"error"})}))},closeProgress:function(){this.progressShow=!1,this.progressLoading=!1;try{clearInterval(this.progress.progressInterval)}catch(e){}},changeType:function(){"file"===this.imgType?(this.imgType="text",this.imgTypeText="切换为文件"):(this.imgType="file",this.imgTypeText="切换为文本")},uploadImg:function(){var e=this,t=new FormData;if(null!=this.$refs.upload){var a=this.$refs.upload.uploadFiles;(null!=this.$refs.upload.uploadFiles||this.$refs.upload.uploadFiles.length>0)&&t.set("file",a[0].raw)}t.set("rank",this.vulInfo.rank),t.set("image_name",this.vulInfo.name),t.set("image_vul_name",this.vulInfo.vul_name),t.set("image_desc",this.vulInfo.desc),t.set("degree",this.vulInfo.degree),t.set("is_flag",this.vulInfo.is_flag),t.set("writeup_date",this.vulInfo.writeup_date),this.loading=!0,u(t).then((function(t){e.loading=!1;var a=t.data,i=a["data"];if(null!=i&&(i.indexOf("成功")>-1||i.indexOf("失败")>-1)){var l=i.replace("拉取镜像","").replace("任务下发成功","").replace(" ","");e.tmpImageNameList.push(l),i.indexOf("成功")>-1?(e.$notify({title:"成功",message:i,type:"success"}),e.centerDialogVisible=!1,e.initTableData()):(e.$notify({title:i,message:i,type:"error"}),e.centerDialogVisible=!1)}else e.$notify({title:"成功",message:a["msg"],type:"success"}),e.centerDialogVisible=!1,e.initTableData()}))},downloadImg:function(e){var t=this,a=e.image_id;g(a).then((function(e){var a=e.data,i=a["msg"];if(200===a.status)if(null!=i&&(i.indexOf("成功")>-1||i.indexOf("失败")>-1)){var l=i.replace("拉取镜像","").replace("任务下发成功","").replace(" ","");t.tmpImageNameList.push(l),i.indexOf("成功")>-1?(t.$notify({title:"成功",message:i,type:"success"}),t.initTableData()):t.$notify({message:i,type:"error"})}else t.$notify({message:i,type:"error"});else t.$notify({message:i,type:"error"}),t.centerDialogVisible=!1}))},shareImg:function(e){var t=this;e.status.status="share",v(e.image_id).then((function(e){var a=e.data,i=a.status;200===i||t.$message({message:a.msg,type:"error"}),t.initTableData()}))},handleDelete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){m(e.image_id).then((function(e){var a=e.data;200===a.status?(t.$message({title:"成功",message:"删除成功!",type:"success"}),t.initTableData()):(t.deleteShow=!0,t.deleteContainerList=a.data,t.$message({title:"失败",message:a.msg,type:"error"}))}))})).catch((function(){}))},handleQuery:function(e){var t=this;Object(s["e"])(this.search,!0,e).then((function(e){t.tableData=e.data.results,t.page.total=e.data.count}))},handleSelect:function(e){this.vulInfo.name=e.value,this.vulInfo.vul_name=e.value.replace("vulfocus/",""),this.vulInfo.desc=e.value.replace("vulfocus/","")},checkTask:function(e){var t=this;e.forEach((function(e,a,i){var l=e["is_ok"],s=e["status"]["task_id"],n=e["status"]["progress_status"];(!1===l&&null!=s&&""!==s||!0===l&&null!=s&&""!==s&&"share"===n)&&-1===t.taskList.indexOf(s)&&(t.taskList.push(s),t.taskDict[s]=e)}));var a=this.taskList.join(",");if(null!=a&&""!==a){var i=new FormData;i.set("task_ids",a),Object(b["a"])(i).then((function(e){var a=e.data.data;for(var i in a){var l=a[i],s=l["status"];if(1!==s&&2!==s)if(t.removeArray(t.taskList,i),t.taskDict[i].is_ok=!0,200===l["data"]["status"]){var n=l["data"]["data"];try{var o=n.replace('{"image_port":',"").replace("}","").replace(":","").replace('"',"").replace('"',"");t.taskDict[i].image_port=o}catch(r){}try{l["data"]["msg"].indexOf("分享")>-1&&(t.taskDict[i].is_share=!0,t.taskDict[i].status.progress_status="")}catch(r){}t.$notify({message:l["data"]["msg"],type:"success"})}else{try{l["data"]["msg"].indexOf("分享")>-1&&(t.taskDict[i].is_share=!1,t.taskDict[i].status.progress_status="")}catch(r){}t.$notify({message:l["data"]["msg"],type:"error"})}else t.taskDict[i].status.progress=l["progress"]}null!=t.taskList&&0!==t.taskList.length||(t.taskList=[],t.taskDict={},clearInterval(t.taskCheckInterval))}))}},removeArray:function(e,t){for(var a=0;a<e.length;a++)if(e[a]===t){e.splice(a,1);break}},loadLocalImages:function(){var e=this;this.localLoading=!0,p().then((function(t){var a=t.data,i=a.status,l=a.data;200===i&&(e.localImageList=l,e.tmpLocalImageList=l),e.localLoading=!1}))},handleClick:function(e,t){var a=e.name;"local"===a&&this.loadLocalImages()},handleLocalRemove:function(e){for(var t=0;t<this.localImageList.length;t++)if(this.localImageList[t].name===e){this.localImageList.splice(t,1);break}},handleSelectLocalImages:function(e){var t=[];for(var a in e)t.push(e[a].name);this.selectLocalImages=t},batchLocalAdd:function(){var e=this;if(0!==this.selectLocalImages.length){var t=new FormData;t.set("image_names",this.selectLocalImages.join(",")),f(t).then((function(t){var a=t.data,i=a.data,l=a.status;if(200===l){for(var s=0;s<i.length;s++){var n=i[s],o=n.replace(" ","").replace("拉取镜像","").replace("任务下发成功","");e.tmpImageNameList.push(o),e.$notify({title:"成功",message:n,type:"success"})}e.centerDialogVisible=!1,e.initTableData()}else 201===l?e.$notify({title:"失败",message:a["msg"],type:"info"}):e.$notify({title:"失败",message:a["msg"],type:"error"})}))}},delContainer:function(e){var t=this;Object(h["a"])(e.container_id).then((function(a){var i=a.data["data"],l=window.setInterval((function(){setTimeout((function(){Object(b["b"])(i).then((function(a){var i=a.data["status"],s=a.data;1001===i||(clearInterval(l),200===i?(t.$message({type:"success",message:"删除成功"}),m(e.image_id).then((function(e){var a=e.data;200!==a.status?t.deleteContainerList=a.data:(t.$message({type:"success",message:"删除成功"}),t.deleteShow=!1,t.initTableData())}))):t.$message({message:s["msg"],type:"error"}))}))}),1)}),1e3)}))},upload:function(e,t){var a=this,i=e.file.size/1024/1024;if(i>2)this.$message({message:"文件大小必须小于2M",type:"error"}),this.fileList.pop();else{var l=this.newFile;Object(w["i"])(l).then((function(e){var t=e.data;if(t.data&&200===t.status){for(var i=0;i<a.fileList.length;i++)-1===a.fileList[i].name.indexOf("../compose_file/")&&(a.fileList[i].name="../compose_file/"+a.fileList[i].name);a.$message({message:"上传成功",type:"success"})}else a.fileList.pop(),a.$message({message:t.msg,type:"error"})})).catch((function(e){a.fileList.pop(),a.$message({message:"服务器内部错误",type:"error"})}))}},removeChange:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=new FormData;i.set("file",e.name),Object(w["b"])(i).then((function(i){var l=i.data;if(200===l.status){for(var s=0;s<t.length;s++)t[s]===e&&t.splice(s,1);a.$message({type:"success",message:"删除成功!"})}else t.push(e),a.$message({type:"error",message:"删除失败!"})}))})).catch((function(){t.push(e),a.$message({type:"info",message:"已取消删除"})}))},update_compose_build:function(){var e=this,t={};t.compose_content=this.compose_content,t.image_id=this.editVulInfo.image_id,Object(w["h"])(t).then((function(t){200===t.data.code?(e.$message({title:"构建任务创建成功",message:t.data.message,type:"success"}),e.editShow=!1,e.initTableData()):e.$message({title:"构建任务创建失败",message:t.data.message,type:"error"})}))},beforeAvatarUpload:function(e){if(!e)return!1;this.newFile.set("file",e)},handleChange:function(e,t){this.fileList=t}}},D=C,O=Object(I["a"])(D,i,l,!1,null,"43ded0e9",null);t["default"]=O.exports},ea7f:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return n}));var i=a("b775");function l(e){return Object(i["a"])({url:"/tasks/"+e+"/get/",method:"get"})}function s(e){return Object(i["a"])({url:"/tasks/batch/batch/",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/tasks/"+e+"/progress/",method:"get"})}},ff32:function(e,t,a){"use strict";a("5c83")}}]);
//# sourceMappingURL=chunk-4e314b30.f2706f66.js.map